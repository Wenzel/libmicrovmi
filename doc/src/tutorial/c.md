# Memory-dump example in C

In this tutorial chapter, we will run the `mem-dump.c` C example code
to dump a domain physical memory.

First, we will compile libmicrovmi with the Xen driver enabled:

~~~
$ cd libmicrovmi
$ cargo build --features xen
~~~

## Install cbindgen

[`cbindgen`](https://github.com/eqrion/cbindgen) is an automated C bindings generation tool from Rust.

To install it:
~~~
$ cargo install --force cbindgen
~~~

## Building mem-dump C example

~~~
$ cd c_examples/
$ make mem-dump
~~~

## Running the example

Next, let's run the example on your domain `<vm_name>`:

~~~
$ sudo LD_LIBRARY_PATH="$LD_LIBRARY_PATH:../target/debug" ./mem-dump <vm_name>
~~~

⚠️ Note: `libmicrovmi.so` has been generated by cargo into `target/debug`.
We have to update `LD_LIBRARY_PATH` so that `mem-dump` can link with the library.

Expected output:

![mem-dump output](./c_mem_dump.png)